# ğŸ—ï¸ Super Admin System Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PUBLIC USERS                              â”‚
â”‚                                                                   â”‚
â”‚  Landing Page (/landing)                                         â”‚
â”‚  - View features                                                 â”‚
â”‚  - Submit contact form                                           â”‚
â”‚  - Request demo                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ POST /api/public/contact-request
                         â”‚ (Rate Limited: 5 per 15 min)
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND SERVER                              â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Public Routes (No Auth)                                  â”‚  â”‚
â”‚  â”‚  - POST /api/public/contact-request                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                        â”‚
â”‚                         â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ContactRequest Model                                     â”‚  â”‚
â”‚  â”‚  - Save to MongoDB                                        â”‚  â”‚
â”‚  â”‚  - Generate request ID                                    â”‚  â”‚
â”‚  â”‚  - Log IP address                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUPER ADMIN USER                              â”‚
â”‚                                                                   â”‚
â”‚  Login (/login)                                                  â”‚
â”‚  - Username: superadmin                                          â”‚
â”‚  - Roles: system:admin, super_admin                             â”‚
â”‚                                                                   â”‚
â”‚  Dashboard (/superadmin)                                         â”‚
â”‚  - Overview Tab                                                  â”‚
â”‚  - Hospitals Tab                                                 â”‚
â”‚  - Contact Requests Tab                                          â”‚
â”‚  - Analytics Tab                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ JWT Token + Super Admin Role
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND SERVER                              â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Auth Middleware                                          â”‚  â”‚
â”‚  â”‚  - Verify JWT token                                       â”‚  â”‚
â”‚  â”‚  - Check super admin role                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                        â”‚
â”‚                         â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Super Admin Routes                                       â”‚  â”‚
â”‚  â”‚  - GET  /api/superadmin/dashboard/stats                  â”‚  â”‚
â”‚  â”‚  - GET  /api/superadmin/hospitals                        â”‚  â”‚
â”‚  â”‚  - GET  /api/superadmin/contact-requests                 â”‚  â”‚
â”‚  â”‚  - PUT  /api/superadmin/contact-requests/:id             â”‚  â”‚
â”‚  â”‚  - POST /api/superadmin/contact-requests/:id/notes       â”‚  â”‚
â”‚  â”‚  - GET  /api/superadmin/analytics/system                 â”‚  â”‚
â”‚  â”‚  - GET  /api/superadmin/analytics/hospital               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                        â”‚
â”‚                         â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Super Admin Controller                                   â”‚  â”‚
â”‚  â”‚  - getDashboardStats()                                    â”‚  â”‚
â”‚  â”‚  - getHospitalsList()                                     â”‚  â”‚
â”‚  â”‚  - getContactRequests()                                   â”‚  â”‚
â”‚  â”‚  - updateContactRequest()                                 â”‚  â”‚
â”‚  â”‚  - addRequestNote()                                       â”‚  â”‚
â”‚  â”‚  - getSystemAnalytics()                                   â”‚  â”‚
â”‚  â”‚  - getHospitalAnalytics()                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MONGODB DATABASE                            â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   hospitals  â”‚  â”‚    users     â”‚  â”‚contactrequestsâ”‚          â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚          â”‚
â”‚  â”‚ - hospitalId â”‚  â”‚ - username   â”‚  â”‚ - requestId  â”‚          â”‚
â”‚  â”‚ - name       â”‚  â”‚ - roles      â”‚  â”‚ - type       â”‚          â”‚
â”‚  â”‚ - status     â”‚  â”‚ - permissionsâ”‚  â”‚ - status     â”‚          â”‚
â”‚  â”‚ - subscriptionâ”‚  â”‚ - isActive   â”‚  â”‚ - priority   â”‚          â”‚
â”‚  â”‚ - statistics â”‚  â”‚              â”‚  â”‚ - contactInfoâ”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚ usagemetrics â”‚  â”‚   studies    â”‚                             â”‚
â”‚  â”‚              â”‚  â”‚              â”‚                             â”‚
â”‚  â”‚ - hospitalId â”‚  â”‚ - studyUID   â”‚                             â”‚
â”‚  â”‚ - date       â”‚  â”‚ - patientID  â”‚                             â”‚
â”‚  â”‚ - studies    â”‚  â”‚ - modality   â”‚                             â”‚
â”‚  â”‚ - users      â”‚  â”‚              â”‚                             â”‚
â”‚  â”‚ - storage    â”‚  â”‚              â”‚                             â”‚
â”‚  â”‚ - modality   â”‚  â”‚              â”‚                             â”‚
â”‚  â”‚ - aiUsage    â”‚  â”‚              â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagrams

### 1. Contact Request Flow

```
User on Landing Page
        â”‚
        â”‚ Fills out form
        â”‚ (name, email, org, message)
        â–¼
    Click Submit
        â”‚
        â”‚ POST /api/public/contact-request
        â”‚ Rate Limited (5 per 15 min)
        â–¼
  Backend Server
        â”‚
        â”‚ Validate data
        â”‚ Generate request ID
        â”‚ Log IP address
        â–¼
  Save to MongoDB
  (contactrequests collection)
        â”‚
        â”‚ Status: "new"
        â”‚ Priority: "medium"
        â–¼
  Return success
        â”‚
        â–¼
  User sees confirmation
  "Request submitted successfully!"
        â”‚
        â”‚
        â–¼
Super Admin Dashboard
        â”‚
        â”‚ Sees new request
        â”‚ in Contact Requests tab
        â–¼
  Reviews request
        â”‚
        â”‚ Updates status: "contacted"
        â”‚ Adds note: "Called customer"
        â–¼
  Follows up
        â”‚
        â”‚ Updates status: "in_progress"
        â”‚ Adds note: "Demo scheduled"
        â–¼
  Converts or Closes
        â”‚
        â”œâ”€â–º "converted" â†’ Links to hospital
        â””â”€â–º "closed" â†’ Marks as resolved
```

### 2. Metrics Tracking Flow

```
User Action
(upload study, view study, create report)
        â”‚
        â–¼
  Metrics Middleware
        â”‚
        â”‚ Intercepts request
        â”‚ Identifies action type
        â–¼
  Metrics Tracking Service
        â”‚
        â”‚ Get or create daily metrics
        â”‚ for hospital + today's date
        â–¼
  Update Metrics
        â”‚
        â”œâ”€â–º Study uploaded â†’ increment studies.uploaded
        â”œâ”€â–º Study viewed â†’ increment studies.viewed
        â”œâ”€â–º Report created â†’ increment studies.reported
        â”œâ”€â–º User login â†’ increment users.totalLogins
        â””â”€â–º AI request â†’ increment aiUsage.totalRequests
        â”‚
        â–¼
  Save to MongoDB
  (usagemetrics collection)
        â”‚
        â”‚ Cached for 5 minutes
        â”‚ to reduce DB writes
        â–¼
  Available in Dashboard
        â”‚
        â”‚ Super admin views analytics
        â”‚ Charts and graphs updated
        â–¼
  Real-time insights
```

### 3. Hospital Analytics Flow

```
Super Admin
        â”‚
        â”‚ Selects hospital
        â”‚ Chooses date range
        â–¼
  GET /api/superadmin/analytics/hospital
  ?hospitalId=hosp_123&startDate=2024-01-01
        â”‚
        â–¼
  Backend Controller
        â”‚
        â”‚ Query usagemetrics collection
        â”‚ Filter by hospitalId and date range
        â–¼
  Aggregate Data
        â”‚
        â”œâ”€â–º Total uploads, views, reports
        â”œâ”€â–º Average active users
        â”œâ”€â–º Modality breakdown
        â””â”€â–º Daily trend data
        â”‚
        â–¼
  Return JSON
        â”‚
        â–¼
  Dashboard Charts
        â”‚
        â”œâ”€â–º Line chart: Daily trend
        â”œâ”€â–º Pie chart: Modality distribution
        â””â”€â–º Cards: Summary stats
```

---

## Component Architecture

### Frontend (React)

```
App.tsx
  â”‚
  â”œâ”€â–º /landing â†’ LandingPage.tsx
  â”‚              â”‚
  â”‚              â”œâ”€â–º Hero Section
  â”‚              â”œâ”€â–º Features Grid
  â”‚              â”œâ”€â–º Benefits List
  â”‚              â”œâ”€â–º CTA Section
  â”‚              â”œâ”€â–º Contact Dialog
  â”‚              â””â”€â–º Demo Dialog
  â”‚
  â”œâ”€â–º /login â†’ LoginPage.tsx
  â”‚
  â””â”€â–º /superadmin â†’ SuperAdminDashboard.tsx
                     â”‚
                     â”œâ”€â–º Overview Tab
                     â”‚   â”œâ”€â–º Stats Cards
                     â”‚   â”œâ”€â–º Storage Progress
                     â”‚   â””â”€â–º Activity Feed
                     â”‚
                     â”œâ”€â–º Hospitals Tab
                     â”‚   â””â”€â–º Hospital Table
                     â”‚       â”œâ”€â–º Name, Status
                     â”‚       â”œâ”€â–º Plan, Users
                     â”‚       â”œâ”€â–º Storage
                     â”‚       â””â”€â–º 30-day Activity
                     â”‚
                     â”œâ”€â–º Contact Requests Tab
                     â”‚   â””â”€â–º Requests Table
                     â”‚       â”œâ”€â–º Request ID, Type
                     â”‚       â”œâ”€â–º Contact Info
                     â”‚       â”œâ”€â–º Status, Priority
                     â”‚       â””â”€â–º Actions
                     â”‚
                     â””â”€â–º Analytics Tab
                         â”œâ”€â–º Line Chart (Daily Trend)
                         â”œâ”€â–º Pie Chart (Modality)
                         â””â”€â–º Bar Chart (Comparison)
```

### Backend (Node.js/Express)

```
server/src/
  â”‚
  â”œâ”€â–º models/
  â”‚   â”œâ”€â–º ContactRequest.js
  â”‚   â”œâ”€â–º UsageMetrics.js
  â”‚   â”œâ”€â–º Hospital.js
  â”‚   â””â”€â–º User.js
  â”‚
  â”œâ”€â–º controllers/
  â”‚   â””â”€â–º superAdminController.js
  â”‚       â”œâ”€â–º getDashboardStats()
  â”‚       â”œâ”€â–º getHospitalsList()
  â”‚       â”œâ”€â–º getContactRequests()
  â”‚       â”œâ”€â–º updateContactRequest()
  â”‚       â”œâ”€â–º addRequestNote()
  â”‚       â”œâ”€â–º getSystemAnalytics()
  â”‚       â””â”€â–º getHospitalAnalytics()
  â”‚
  â”œâ”€â–º routes/
  â”‚   â”œâ”€â–º superadmin.js (protected)
  â”‚   â””â”€â–º public.js (no auth)
  â”‚
  â”œâ”€â–º services/
  â”‚   â””â”€â–º metrics-tracking-service.js
  â”‚       â”œâ”€â–º trackStudyUpload()
  â”‚       â”œâ”€â–º trackStudyView()
  â”‚       â”œâ”€â–º trackReportCreation()
  â”‚       â”œâ”€â–º trackUserLogin()
  â”‚       â””â”€â–º trackAIRequest()
  â”‚
  â””â”€â–º middleware/
      â”œâ”€â–º authMiddleware.js
      â”œâ”€â–º metricsMiddleware.js
      â””â”€â–º rateLimitMiddleware.js
```

---

## Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Hospital   â”‚
â”‚              â”‚
â”‚ hospitalId â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ name         â”‚         â”‚
â”‚ status       â”‚         â”‚
â”‚ subscription â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                         â”‚
                         â”‚ Foreign Key
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚     User     â”‚         â”‚
â”‚              â”‚         â”‚
â”‚ username     â”‚         â”‚
â”‚ roles        â”‚         â”‚
â”‚ hospitalId â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ Foreign Key
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚UsageMetrics  â”‚
â”‚              â”‚
â”‚ hospitalId â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ date         â”‚         â”‚
â”‚ studies      â”‚         â”‚
â”‚ users        â”‚         â”‚
â”‚ storage      â”‚         â”‚
â”‚ modality     â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                         â”‚
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ContactRequestâ”‚         â”‚
â”‚              â”‚         â”‚
â”‚ requestId    â”‚         â”‚
â”‚ type         â”‚         â”‚
â”‚ status       â”‚         â”‚
â”‚ contactInfo  â”‚         â”‚
â”‚ convertedTo â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ HospitalId   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Layer 1: Network                      â”‚
â”‚  - HTTPS/TLS encryption                                  â”‚
â”‚  - Firewall rules                                        â”‚
â”‚  - DDoS protection                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Layer 2: Rate Limiting                   â”‚
â”‚  - Public endpoints: 5 req/15 min                        â”‚
â”‚  - API endpoints: 100 req/15 min                         â”‚
â”‚  - IP-based tracking                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Layer 3: Authentication                   â”‚
â”‚  - JWT token validation                                  â”‚
â”‚  - Token expiration (24 hours)                           â”‚
â”‚  - Refresh token rotation                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Layer 4: Authorization                    â”‚
â”‚  - Role-based access control (RBAC)                      â”‚
â”‚  - Super admin role required                             â”‚
â”‚  - Permission checking                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Layer 5: Data Access                    â”‚
â”‚  - Hospital isolation                                    â”‚
â”‚  - Query filtering by hospitalId                         â”‚
â”‚  - No PHI in analytics                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Layer 6: Audit                         â”‚
â”‚  - All actions logged                                    â”‚
â”‚  - IP address tracking                                   â”‚
â”‚  - Timestamp recording                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Internet                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Load Balancer                          â”‚
â”‚                   (AWS ALB / Nginx)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Web Server                             â”‚
â”‚                   (Node.js/Express)                      â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚   Backend    â”‚  â”‚   Frontend   â”‚                     â”‚
â”‚  â”‚   API        â”‚  â”‚   React App  â”‚                     â”‚
â”‚  â”‚   Port 5000  â”‚  â”‚   Port 3000  â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MongoDB                                â”‚
â”‚                   (Database)                             â”‚
â”‚                                                           â”‚
â”‚  Collections:                                            â”‚
â”‚  - users                                                 â”‚
â”‚  - hospitals                                             â”‚
â”‚  - contactrequests                                       â”‚
â”‚  - usagemetrics                                          â”‚
â”‚  - studies                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Metrics Collection Pipeline

```
User Action
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Metrics         â”‚
â”‚ Middleware      â”‚
â”‚ (Intercepts)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Identify        â”‚
â”‚ Action Type     â”‚
â”‚ - Upload        â”‚
â”‚ - View          â”‚
â”‚ - Report        â”‚
â”‚ - Login         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Metrics         â”‚
â”‚ Tracking        â”‚
â”‚ Service         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get/Create      â”‚
â”‚ Daily Metrics   â”‚
â”‚ (Cached)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update          â”‚
â”‚ Counters        â”‚
â”‚ - Increment     â”‚
â”‚ - Add to array  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save to         â”‚
â”‚ MongoDB         â”‚
â”‚ (Batched)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Available in    â”‚
â”‚ Dashboard       â”‚
â”‚ (Real-time)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack

```
Frontend:
  â”œâ”€â–º React 18
  â”œâ”€â–º TypeScript
  â”œâ”€â–º Material-UI (MUI)
  â”œâ”€â–º Chart.js
  â”œâ”€â–º Axios
  â””â”€â–º React Router

Backend:
  â”œâ”€â–º Node.js
  â”œâ”€â–º Express.js
  â”œâ”€â–º MongoDB (Mongoose)
  â”œâ”€â–º JWT (jsonwebtoken)
  â”œâ”€â–º bcrypt
  â””â”€â–º express-rate-limit

Database:
  â””â”€â–º MongoDB
      â”œâ”€â–º users
      â”œâ”€â–º hospitals
      â”œâ”€â–º contactrequests
      â”œâ”€â–º usagemetrics
      â””â”€â–º studies

Infrastructure:
  â”œâ”€â–º AWS EC2 (or similar)
  â”œâ”€â–º MongoDB Atlas (or self-hosted)
  â”œâ”€â–º Nginx (reverse proxy)
  â””â”€â–º PM2 (process manager)
```

---

This architecture provides a scalable, secure, and maintainable super admin system for monitoring and managing multiple hospitals in your medical imaging platform.

